[
  {
    "type": "index",
    "name": "idx_media_channels_active",
    "tbl_name": "media_channels",
    "sql": "CREATE INDEX idx_media_channels_active on media_channels(is_active)"
  },
  {
    "type": "index",
    "name": "idx_members_email",
    "tbl_name": "members",
    "sql": "CREATE INDEX idx_members_email on members(email)"
  },
  {
    "type": "index",
    "name": "idx_members_login_id",
    "tbl_name": "members",
    "sql": "CREATE INDEX idx_members_login_id on members(login_id)"
  },
  {
    "type": "index",
    "name": "idx_order_attachments_uploaded_at",
    "tbl_name": "order_attachments",
    "sql": "CREATE INDEX idx_order_attachments_uploaded_at on order_attachments(uploaded_at)"
  },
  {
    "type": "index",
    "name": "idx_order_logs_order_id",
    "tbl_name": "order_status_logs",
    "sql": "CREATE INDEX idx_order_logs_order_id on order_status_logs(order_id)"
  },
  {
    "type": "index",
    "name": "idx_orders_created_at",
    "tbl_name": "orders",
    "sql": "CREATE INDEX idx_orders_created_at on orders(created_at)"
  },
  {
    "type": "index",
    "name": "idx_orders_member_id",
    "tbl_name": "orders",
    "sql": "CREATE INDEX idx_orders_member_id on orders(member_id)"
  },
  {
    "type": "index",
    "name": "idx_orders_status",
    "tbl_name": "orders",
    "sql": "CREATE INDEX idx_orders_status on orders(status)"
  },
  {
    "type": "table",
    "name": "_cf_KV",
    "tbl_name": "_cf_KV",
    "sql": "CREATE TABLE _cf_KV (\n        key TEXT PRIMARY KEY,\n        value BLOB\n      ) WITHOUT ROWID"
  },
  {
    "type": "table",
    "name": "admin_logs",
    "tbl_name": "admin_logs",
    "sql": "CREATE TABLE admin_logs (\n  id integer primary key autoincrement,\n  message text not null,\n  created_at text not null default (datetime('now'))\n)"
  },
  {
    "type": "table",
    "name": "media_channels",
    "tbl_name": "media_channels",
    "sql": "CREATE TABLE media_channels (\n  id text primary key,\n  name text not null unique,\n  category text not null,\n  byline_type text,\n  unit_price integer not null default 0,\n  member_price_label text not null default '회원전용',\n  channel text,\n  description text,\n  is_active integer not null default 1,\n  created_at text not null default (datetime('now')),\n  updated_at text not null default (datetime('now'))\n)"
  },
  {
    "type": "table",
    "name": "members",
    "tbl_name": "members",
    "sql": "CREATE TABLE members (\n  id text primary key,\n  login_id text not null unique,\n  name text not null,\n  email text not null unique,\n  company text,\n  password text not null,\n  point_balance integer not null default 5000000,\n  role text not null default 'member',\n  created_at text not null default (datetime('now')),\n  updated_at text not null default (datetime('now'))\n)"
  },
  {
    "type": "table",
    "name": "order_attachments",
    "tbl_name": "order_attachments",
    "sql": "CREATE TABLE order_attachments (order_id text primary key, file_key text not null, file_name text not null, file_mime text not null default 'application/octet-stream', file_size integer not null default 0, uploaded_by_member_id text, uploaded_at text not null default (datetime('now')), foreign key(order_id) references orders(id) on delete cascade)"
  },
  {
    "type": "table",
    "name": "order_status_logs",
    "tbl_name": "order_status_logs",
    "sql": "CREATE TABLE order_status_logs (\n  id integer primary key autoincrement,\n  order_id text not null,\n  from_status text,\n  to_status text not null,\n  changed_by text,\n  note text,\n  changed_at text not null default (datetime('now')),\n  foreign key(order_id) references orders(id) on delete cascade,\n  foreign key(changed_by) references members(id) on delete set null\n)"
  },
  {
    "type": "table",
    "name": "orders",
    "tbl_name": "orders",
    "sql": "CREATE TABLE orders (\n  id text primary key,\n  member_id text not null,\n  member_login_id text,\n  member_name text,\n  email text,\n  title text not null,\n  media_id text,\n  media_name text,\n  budget integer not null default 0,\n  status text not null default 'received',\n  request_note text,\n  created_at text not null default (datetime('now')),\n  updated_at text not null default (datetime('now')),\n  foreign key(member_id) references members(id) on delete cascade\n)"
  }
]
