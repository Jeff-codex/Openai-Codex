# 딜리버 개발 기록 (Development Journal)

아래 형식으로 단계 완료 시 자동 누적됩니다.

## 기록 샘플
- 단계: 작업 단계명
- 요약: 완료 내용 요약
- 변경 파일:
- `상대경로/파일명`
- 다음 작업: 이어서 할 작업

## 2026-02-23 16:54:02 KST
- 단계: 기록 스크립트 한글 경로 출력 개선
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.supabase.example
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/checkpoint.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/resume_deliver.sh
- 다음 작업: 이어서 개발 진행

## 2026-02-23 16:56:39 KST
- 단계: 미리보기 경로 자동 출력 원칙 반영
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/checkpoint.sh
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 다음 작업: 이어서 개발 진행

## 2026-02-23 17:07:33 KST
- 단계: Admin MVP 골격 및 Supabase 스키마 추가
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/checkpoint.sh
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/AdminMVP-운영구성-AdminMVPBlueprint.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/DB스키마-SupabaseSchema.sql
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 다음 작업: 이어서 개발 진행

## 2026-02-23 17:12:47 KST
- 단계: Supabase 기초 인프라 및 동기화 스크립트 구축
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/checkpoint.sh
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/AdminMVP-운영구성-AdminMVPBlueprint.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/DB스키마-SupabaseSchema.sql
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Supabase연동가이드-SupabaseSetupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/supabase_sync_seed.mjs
- 딜리버(DELIVER)/08_데이터베이스-Database/
- 다음 작업: 이어서 개발 진행

## 2026-02-23 17:23:39 KST
- 단계: 딜리버(Deliver) 테이블 URL 및 RLS 마이그레이션 구축
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/checkpoint.sh
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/AdminMVP-운영구성-AdminMVPBlueprint.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/DB스키마-SupabaseSchema.sql
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Supabase연동가이드-SupabaseSetupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/supabase_sync_seed.mjs
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/supabase_urls.sh
- 딜리버(DELIVER)/08_데이터베이스-Database/
- 다음 작업: 이어서 개발 진행

## 2026-02-23 19:14:03 KST
- 단계: 도메인/인증/Pages 배포 통합 연동 및 운영 경로 표준화
- 요약: 랜딩/관리자 로그인 기능 안정화, 관리자 단일 계정 게이트 적용, Cloudflare DNS(운영/스테이징/개발+MX/TXT/DMARC/CAA) 점검 및 보강, Cloudflare Pages(dilver) 프로젝트 생성 및 정적 배포 완료, 커스텀 도메인 연동 반영
- 변경 파일:
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/styles.css
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 다음 작업: Pages 커스텀 도메인 상태(active) 전환 최종 확인 후 API 실서비스 백엔드 분리 연동

## 2026-02-23 19:40:45 KST
- 단계: 회원전용 주문 대시보드 구축 및 로그인 후 자동 리다이렉트 연동
- 요약: 회원가입/로그인 성공 시 회원전용 페이지로 자동 이동하도록 랜딩 인증 플로우를 연결했고, 엑셀 기반 매체 시드(공통 데이터)를 반영한 회원 주문 대시보드(매체 선택/포인트/주문 상태)를 구현했으며, 관리자 페이지에도 동일 시드 연동을 적용해 주문 상태 동기화가 가능하도록 정리함. Playwright E2E로 회원가입→주문→관리자 상태변경→회원 반영까지 검증 완료.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/app.js
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: Cloudflare Pages 운영 배포 반영 후 실 도메인에서 회원전용 플로우(로그인/주문/상태 동기화) 재검증

## 2026-02-23 19:44:17 KST
- 단계: 단계 완료 보고 원칙 변경(경로 중심 → 체크리스트 중심)
- 요약: 매 단계 완료 시 Windows 접속 경로를 기본 제공하던 원칙을 중지하고, 앞으로는 `완료/미완료 체크리스트`를 기본 보고 형식으로 고정하도록 개발 원칙 및 README 정책을 갱신함.
- 변경 파일:
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 다음 개발 단계부터 체크리스트 기반 완료 보고 형식 적용

## 2026-02-23 19:54:36 KST
- 단계: 미완료 항목 즉시 실행(운영 배포/실도메인 회귀/Supabase 실연동 점검)
- 요약: Cloudflare Pages `dliver`에 최신 변경을 재배포(배포 URL: `https://141e8d49.dliver.pages.dev`)했고, 운영 도메인 실브라우저 회귀 테스트에서 회원가입→회원전용 리다이렉트→주문등록→관리자 상태변경→회원 상태반영까지 검증 완료. 또한 admin 서브도메인 접속 시 메인 도메인 관리자 경로로 라우팅되도록 수정해 LocalStorage 분리 이슈를 임시 안정화함. Supabase 실연동은 원격 스키마 미적용(`media_channels` 테이블 부재, PGRST205)으로 차단되어 SQL 마이그레이션 선적용이 필요함.
- 변경 파일:
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: Supabase SQL Editor에서 `001_init_supabase_schema.sql` + `002_create_deliver_table_with_rls.sql` 실행 후 `supabase_sync_seed.mjs` 재실행하여 실연동 마무리

## 2026-02-23 20:44:44 KST
- 단계: Cloudflare API 기반 인프라 직접 구축(D1/KV)
- 요약: 제공받은 Cloudflare API 토큰으로 D1(`dliver-prod-db`)과 KV(`dliver-session-kv-prod`)를 직접 생성했고, D1 전용 스키마 마이그레이션(`003_init_d1_schema.sql`) 및 엑셀 기반 매체 121건 시드를 원격 반영 완료. 기본 계정(admin/test) 시드 확인까지 완료. R2는 계정 수준 미활성(`10042`)로 API 생성 불가 상태를 재확인.
- 변경 파일:
- 딜리버(DELIVER)/08_데이터베이스-Database/01_마이그레이션-Migrations/003_init_d1_schema.sql
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: R2 대시보드 온보딩 완료 후 버킷 생성 및 Pages Functions에 D1/KV/R2 바인딩 연결

## 2026-02-23 21:12:00 KST
- 단계: Cloudflare 전용 고정값 전환 및 R2 활성화 재검토
- 요약: Supabase 관련 실행 파일(.env 예시/동기화 스크립트/마이그레이션/가이드)을 프로젝트 운영 경로에서 제거하고, DB 백업 자동화를 `cloudflare_d1_snapshot.mjs` 기반으로 교체해 Cloudflare D1 전용으로 정리함. R2 API 재검토 결과 토큰은 active이나 계정 API 응답이 계속 `10042`(Dashboard R2 온보딩 미완료)로 반환되어 버킷 생성은 보류됨. 추가로 현재 토큰은 Pages 프로젝트 읽기/배포 권한이 없어 wrangler 배포는 인증 오류(`10000`)로 차단됨.
- 변경 파일:
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/cloudflare_d1_snapshot.mjs
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/database_backup_all.sh
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.cloudflare.example
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Cloudflare연동가이드-CloudflareSetupGuide.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.supabase.example (삭제)
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/DB스키마-SupabaseSchema.sql (삭제)
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Supabase연동가이드-SupabaseSetupGuide.md (삭제)
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/supabase_backup_all.mjs (삭제)
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/supabase_sync_seed.mjs (삭제)
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/supabase_urls.sh (삭제)
- 딜리버(DELIVER)/08_데이터베이스-Database/01_마이그레이션-Migrations/001_init_supabase_schema.sql (삭제)
- 딜리버(DELIVER)/08_데이터베이스-Database/01_마이그레이션-Migrations/002_create_deliver_table_with_rls.sql (삭제)
- 다음 작업: R2 Dashboard 온보딩 최종 완료 확인 후 버킷 생성 API 재시도, Pages 배포 권한 포함 토큰 발급 후 최신 코드 재배포 및 실도메인 검증

## 2026-02-23 21:16:00 KST
- 단계: R2 활성화 완료 반영 및 버킷 생성/연동 재시도
- 요약: Cloudflare R2 활성화 이후 API 재검증에서 버킷 목록 조회가 정상화되었고, `dliver-prod-files` 버킷 생성을 성공 처리함. Functions 공통 유틸에 R2 바인딩 헬퍼(`FILES_BUCKET`)를 추가하고 `/api/health` 응답에 `r2Ready`를 노출해 배포 후 연동 상태를 즉시 점검 가능하도록 확장함. 다만 현재 토큰은 Pages 권한이 부족해 프로젝트 조회/패치가 `10000 Authentication error`로 차단되어 R2 바인딩의 원격 연결 및 재배포는 보류됨.
- 변경 파일:
- 딜리버(DELIVER)/functions/api/_lib/cloudflare_store.js
- 딜리버(DELIVER)/functions/api/health.js
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Cloudflare연동가이드-CloudflareSetupGuide.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: Pages 권한 포함 토큰으로 `dliver` 프로젝트에 `FILES_BUCKET` 바인딩 적용 후 최신 코드 재배포 및 `/api/health` 실도메인 검증

## 2026-02-23 21:23:00 KST
- 단계: R2 운영 검증(버킷 생성 + 오브젝트 스모크 테스트)
- 요약: R2 전용 토큰으로 `dliver-prod-files` 버킷 생성을 완료했고, `wrangler r2 object`를 통해 업로드→다운로드→무결성 비교→삭제까지 원격 스모크 테스트를 통과해 R2 실사용 가능 상태를 확인함. 현재 전달 토큰은 R2 권한만 보유하여 Pages 프로젝트 조회/패치는 `10000`으로 차단되어, `FILES_BUCKET` 바인딩 적용 및 재배포는 Pages 권한 토큰이 추가로 필요함.
- 변경 파일:
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: Pages Edit 권한 토큰 발급 후 프로젝트 `dliver`에 R2 바인딩(`FILES_BUCKET -> dliver-prod-files`) 적용 및 최신 배포

## 2026-02-23 21:28:00 KST
- 단계: Pages 권한 토큰 반영 후 R2 바인딩/재배포/운영 검증
- 요약: 새 Pages 권한 토큰(`bltV0...`)으로 프로젝트 `dliver` 조회 및 패치 권한을 확인했고, preview/production 모두에 `FILES_BUCKET -> dliver-prod-files` R2 바인딩을 적용했다. 이후 최신 코드를 `https://070a20be.dliver.pages.dev`로 재배포했고, 운영 도메인 `https://dliver.co.kr/api/health`에서 `r2Ready: true`, `mediaCount: 121`을 확인했다. 추가로 실운영 API 스모크 테스트(회원가입→로그인→주문→조회→로그아웃, 관리자 로그인→bootstrap→로그아웃)까지 정상 완료.
- 변경 파일:
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 보안 정리(CF_API_TOKEN 환경변수 제거/토큰 회전) 및 첨부파일 업로드 API(R2) 기능 확장

## 2026-02-23 21:33:00 KST
- 단계: 로그인/회원가입 전체 디버깅 체크 및 안정화 패치
- 요약: 운영 도메인 기준 API/도메인/관리자 서브도메인 전수 점검에서 로그인·회원가입·주문 흐름은 정상 재현됨. 프론트 스크립트에서 DOM 요소 누락 시 전체 인증 로직이 중단되지 않도록 방어 처리(optional chaining + null-safe UI 갱신)를 추가했고, 재현/회귀를 자동화하기 위해 `auth_debug_check.sh`를 신규 도입함. 최신 배포(`https://565d3cd2.dliver.pages.dev`) 후 운영 도메인에서 health(`r2Ready=true`) 및 auth E2E 스모크 테스트를 재실행하여 정상 확인.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/auth_debug_check.sh
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 사용자 브라우저에서 동일 증상 재발 시 콘솔 에러/네트워크 응답 캡처 기반 원인 고정

## 2026-02-23 21:39:00 KST
- 단계: 로그인 후 회원전용페이지 랜딩 튕김 이슈 안정화
- 요약: 회원전용 페이지 초기화 로직에서 `/api/media` 또는 `/api/orders` 일시 실패까지 인증 실패로 처리해 토큰 삭제 후 랜딩으로 강제 이동하던 문제를 수정함. 이제 랜딩 이동은 `401` 인증 실패일 때만 수행되며, 기타 API 오류는 세션 유지 상태에서 재동기화로 처리된다. 추가로 로그인 이동 경로에 hash 토큰 fallback(`t=`)과 sessionStorage 보조 저장을 적용해 리다이렉트 안정성을 강화함. 최신 배포(`https://5dd9cfab.dliver.pages.dev`) 후 운영 도메인 auth 스모크 테스트 통과 확인.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/auth_debug_check.sh
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 사용자 실브라우저 재현 로그(콘솔/네트워크) 수집 시 추가 엣지케이스 보정

## 2026-02-23 21:45:00 KST
- 단계: 로그인 후 랜딩 튕김 최종 안정화(캐시 강제 무효화 포함)
- 요약: 회원전용 페이지 튕김 이슈의 재발 원인을 정적 JS 캐시(max-age=14400) 재사용 가능성까지 포함해 보강함. 회원전용 페이지 이동 경로를 `index.html?v=20260223r3`로 고정하고, 회원전용 페이지 스크립트 로딩도 `app.js?v=20260223r3`/`media_seed.js?v=20260223r3`로 변경해 구버전 캐시를 강제로 우회하도록 조치. 운영 배포(`https://0e889122.dliver.pages.dev`) 후 도메인 반영 및 auth 회귀 테스트 정상 확인.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 사용자 체감 기준 로그인 재시도 결과 확인 및 필요 시 관리자 페이지에도 동일 캐시 버전 정책 확대

## 2026-02-23 21:52:00 KST
- 단계: 회원 주문 원고파일첨부 + 관리자 열람/저장 기능 구축
- 요약: 회원전용 주문 등록 폼에 `원고파일첨부` 버튼/입력을 추가하고, 주문 API를 multipart 업로드 지원으로 확장해 R2(`dliver-prod-files`)에 원고 파일 저장 및 D1 메타데이터(`order_attachments`) 기록을 구현함. 관리자 주문 목록에 첨부파일 열을 추가해 `열람`/`저장` 버튼을 제공하고, 관리자 인증 기반 파일 스트리밍 API(`/api/admin/attachment`)를 신규 구현함. 운영 배포(`https://e0d41fc4.dliver.pages.dev`) 후 E2E 검증(회원 업로드→관리자 bootstrap 반영→다운로드 파일 무결성 비교) 통과.
- 변경 파일:
- 딜리버(DELIVER)/functions/api/_lib/order_attachment_store.js
- 딜리버(DELIVER)/functions/api/orders/index.js
- 딜리버(DELIVER)/functions/api/admin/bootstrap.js
- 딜리버(DELIVER)/functions/api/admin/attachment.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Cloudflare연동가이드-CloudflareSetupGuide.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 관리자 주문 상세(첨부 다건/삭제/교체) 기능 확장 여부 결정

## 2026-02-23 21:58:00 KST
- 단계: 포인트 정책 변경(회원가입 0포인트) + 주문 사용포인트 자동단가 고정
- 요약: 회원가입 기본 지급 포인트를 5,000,000에서 0으로 변경하고(`signup` API 반영), 회원전용 주문 등록 화면에서 사용포인트를 매체 선택 단가로 자동 입력/읽기전용 처리함. 서버에서도 주문 `budget` 값을 클라이언트 입력 대신 선택 매체 `unit_price`로 강제해 우회 입력을 차단함. 운영 배포(`https://5a090a70.dliver.pages.dev`) 후 실검증에서 신규 회원가입 `pointBalance:0` 확인, 주문 API 강제단가 적용(`budget=1` 전송해도 `unit_price` 반영) 확인.
- 변경 파일:
- 딜리버(DELIVER)/functions/api/auth/signup.js
- 딜리버(DELIVER)/functions/api/orders/index.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/auth_debug_check.sh
- 딜리버(DELIVER)/08_데이터베이스-Database/01_마이그레이션-Migrations/003_init_d1_schema.sql
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 포인트 충전/차감 관리 정책(관리자 충전 UI) 확정

## 2026-02-23 22:04:00 KST
- 단계: 관리자 주문관리 표에 회원아이디 컬럼 추가
- 요약: 관리자페이지 주문관리 테이블에서 `주문명` 오른쪽에 `회원아이디` 컬럼을 추가하고, 주문 렌더링 시 `memberLoginId`를 표시하도록 수정함. 빈 데이터 행 `colspan`도 신규 컬럼 수에 맞춰 조정했고, 캐시 반영을 위해 관리자 스크립트 버전을 `v=20260223r5`로 갱신함. 운영 배포(`https://06fbe591.dliver.pages.dev`) 후 `admin.dliver.co.kr`에서 컬럼 반영 확인 완료.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/app.js
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 주문관리 표 항목(회원아이디/이메일 기준 필터링) 확장 여부 결정

## 2026-02-23 22:05:00 KST
- 단계: 관리자 주문관리 10건 단위 페이지네이션 적용
- 요약: 관리자 주문관리 테이블이 수직 무한 노출되지 않도록 페이지당 10건 고정(`ORDERS_PAGE_SIZE=10`)으로 변경하고, 10건 초과 시 페이지 버튼(이전/1..N/다음)으로 이동하도록 구현함. 주문 렌더링은 현재 페이지 슬라이스만 표시하며, 빈 상태 `colspan` 및 캐시 버전(`v=20260223r6`)도 함께 갱신. 운영 배포(`https://25e76ca1.dliver.pages.dev`) 후 반영 확인.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/styles.css
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 주문관리 페이지네이션에 페이지당 건수 옵션(10/20/50) 추가 여부 결정

## 2026-02-23 22:09:00 KST
- 단계: 회원전용페이지 매체선택 UI 그룹화 + 클릭 스크롤 선택 구조 개선
- 요약: 매체 선택 목록의 수직 과다 길이 문제를 해결하기 위해 매체를 카테고리별 그룹으로 묶고, 상단 그룹 버튼 클릭 시 아래 그룹 목록 컨테이너로 스크롤 이동되도록 개편함. 기존 테이블 리스트를 그룹 카드 목록(`media-group-nav`/`media-group-list`)으로 대체하고, 검색/선택/선택상태 하이라이트/선택단가 자동동기화는 유지함. 캐시 버전을 `v=20260223r6`으로 갱신해 즉시 반영되도록 처리하고 운영 배포(`https://6877b1b6.dliver.pages.dev`) 완료.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 그룹 펼침(접기/펼치기) 또는 즐겨찾기 매체 고정 기능 추가 여부 결정

## 2026-02-23 22:58:12 KST
- 단계: 미완료 체크리스트 자동정리 점검
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.supabase.example
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/checkpoint.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/resume_deliver.sh
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.cloudflare.example
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/AdminMVP-운영구성-AdminMVPBlueprint.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Cloudflare연동가이드-CloudflareSetupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/auth_debug_check.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/cloudflare_d1_snapshot.mjs
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/database_backup_all.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/optimize_storage.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 딜리버(DELIVER)/08_데이터베이스-Database/
- 딜리버(DELIVER)/functions/
- 다음 작업: 이어서 개발 진행

## 2026-02-23 23:16:47 KST
- 단계: 회원전용페이지 모바일 가로 overflow(우측 늘어짐) 안정화
- 요약: 로그인 후 회원전용페이지에서 모바일 화면이 우측으로 늘어지는 현상을 막기 위해 모바일 미디어쿼리 내부에서만 루트/레이아웃/카드의 `min-width` 및 `overflow-x`를 보강하고, 상단 액션 영역을 세로 정렬로 전환했다. 또한 모바일 구간에서 테이블 `min-width: 520px` 강제값을 제거해 화면 폭에 맞춰 수축되도록 수정했고, 캐시 강제 갱신을 위해 회원포털/랜딩 버전을 `v=20260223r14`로 상향했다. Cloudflare Pages 재배포(`https://0b96c0d2.dliver.pages.dev`) 및 운영 도메인 `r14` 반영 확인 완료.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 실제 모바일 단말(Chrome/Safari)에서 회원 로그인 후 가로 스크롤 재발 여부 최종 확인

## 2026-02-23 23:48:21 KST
- 단계: 보안 전면 점검/강화(CORS/CSRF/XSS-CSP/Auth/RateLimit/세션/감사로그) + 운영 검증
- 요약: API 공통 미들웨어(`functions/_middleware.js`)를 도입해 CORS/Preflight, CSRF, Origin 검증, RateLimit, 보안헤더(HSTS 포함), 5xx 에러 마스킹을 일괄 적용했다. 인증 체계를 로컬스토리지 토큰에서 HttpOnly 세션 쿠키 기반으로 전환하고 비밀번호를 PBKDF2-SHA256 해시로 마이그레이션(레거시 평문 자동 재해시)했으며, 관리자 권한은 매 요청 시 DB 역할 재검증으로 RBAC를 강화했다. 보안 감사 로그(`security_audit_logs`)를 추가해 로그인/권한변경/주문처리 이벤트를 남기도록 했고, `_headers`로 CSP/XFO/XCTO 등 정적 응답 보안헤더를 적용했다. 운영 배포(`https://164144f6.dliver.pages.dev`) 후 `security_smoke_check.sh` 및 회원 인증 회귀 테스트(회원가입→/me→로그아웃) 모두 통과.
- 변경 파일:
- 딜리버(DELIVER)/functions/_middleware.js
- 딜리버(DELIVER)/functions/api/_lib/cloudflare_store.js
- 딜리버(DELIVER)/functions/api/admin/_auth.js
- 딜리버(DELIVER)/functions/api/auth/login.js
- 딜리버(DELIVER)/functions/api/auth/signup.js
- 딜리버(DELIVER)/functions/api/auth/me.js
- 딜리버(DELIVER)/functions/api/auth/logout.js
- 딜리버(DELIVER)/functions/api/admin/login.js
- 딜리버(DELIVER)/functions/api/admin/logout.js
- 딜리버(DELIVER)/functions/api/orders/index.js
- 딜리버(DELIVER)/functions/api/admin/orders.js
- 딜리버(DELIVER)/functions/api/admin/members.js
- 딜리버(DELIVER)/functions/api/admin/media.js
- 딜리버(DELIVER)/functions/api/admin/bootstrap.js
- 딜리버(DELIVER)/functions/api/admin/attachment.js
- 딜리버(DELIVER)/functions/api/media/index.js
- 딜리버(DELIVER)/functions/api/health.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/security_smoke_check.sh
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.cloudflare.example
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.cloudflare
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Cloudflare연동가이드-CloudflareSetupGuide.md
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/_headers
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: D1 세션/감사로그 백업 스케줄 자동화와 관리자 감사로그 조회 UI 확장

## 2026-02-24 00:35:31 KST
- 단계: 2026-02-24 EOD 전체 스캔/디버깅/백업
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.supabase.example
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발원칙-DevelopmentPrinciples.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/checkpoint.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/resume_deliver.sh
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.cloudflare.example
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/AdminMVP-운영구성-AdminMVPBlueprint.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/Cloudflare연동가이드-CloudflareSetupGuide.md
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/auth_debug_check.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/cloudflare_d1_snapshot.mjs
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/database_backup_all.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/optimize_storage.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/preview_paths.sh
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/security_smoke_check.sh
- 딜리버(DELIVER)/08_데이터베이스-Database/
- 딜리버(DELIVER)/_headers
- 딜리버(DELIVER)/b09eda93-01a2-4155-abab-1d6b64bc3519.txt
- 딜리버(DELIVER)/functions/
- 딜리버(DELIVER)/robots.txt
- 딜리버(DELIVER)/sitemap.xml
- 다음 작업: 이어서 개발 진행

## 2026-02-24 09:12:24 KST
- 단계: 관리자 보안 감사로그 UI 확장 + D1 백업 스케줄 자동화 보강
- 요약: 관리자 bootstrap API에 `security_audit_logs` 조회를 추가하고 관리자 페이지에 보안 감사로그(요약/결과 필터/검색/테이블) 섹션을 확장했다. D1 초기 마이그레이션에 `security_audit_logs` 테이블/인덱스를 명시해 신규 환경에서도 일관 동작하도록 정리했고, `cloudflare_d1_snapshot.mjs` 백업 대상에 감사로그를 포함했다. 추가로 `scheduled_backup_runner.sh`를 도입해 시크릿 자동 로드, 중복 실행 방지(lock), 실행 로그 저장을 포함한 스케줄러 전용 백업 실행 경로를 마련했다.
- 변경 파일:
- 딜리버(DELIVER)/functions/api/admin/bootstrap.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/styles.css
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/cloudflare_d1_snapshot.mjs
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/scheduled_backup_runner.sh
- 딜리버(DELIVER)/08_데이터베이스-Database/01_마이그레이션-Migrations/003_init_d1_schema.sql
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/AdminMVP-운영구성-AdminMVPBlueprint.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/원격백업가이드-RemoteBackupGuide.md
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 관리자 감사로그 기간 필터(최근 24시간/7일)와 감사로그 CSV 내보내기 추가

## 2026-02-24 09:25:25 KST
- 단계: 미완료 체크리스트 즉시 실행(배포/운영검증/크론)
- 요약: `scheduled_backup_runner.sh` 크론 작업을 `15 */6 * * *`로 등록해 주기 실행 경로를 확정했다. 수동 실행(`--soft`)도 재검증했으며 로그 파일 생성은 정상이나, 현재 로컬 비밀 파일(`~/.deliver-secrets/.env.cloudflare.local`) 부재 및 `.env.cloudflare` 토큰 값 공란으로 D1 실백업(하드 모드)과 Cloudflare Pages 재배포는 차단되었다. 또한 실행 환경에서 `dliver.co.kr` Cloudflare IP:443 직접 연결이 실패해 운영 API 실검증은 네트워크 제약으로 보류했다.
- 변경 파일:
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/06_운영로그-OpsLogs/backup-schedule/backup-20260224-092447.log
- 다음 작업: 로컬 비밀파일에 `CLOUDFLARE_API_TOKEN`/`CLOUDFLARE_ACCOUNT_ID` 주입 후 Pages 재배포, 운영 API 감사로그 응답(`securityLogs`) 실검증 완료

## 2026-02-24 09:53:22 KST
- 단계: Cloudflare 토큰 보안 보관 + 재배포/운영검증/백업 완료
- 요약: 최신 Cloudflare API 토큰을 저장소 외부 보안 경로(`~/.deliver-secrets/.env.cloudflare.local`)에 `700/600` 권한으로 보관하고, 기존 `/mnt/c` 경로에 생성된 비보안 복사본은 제거했다. 이후 동일 토큰으로 Pages 재배포(`https://4d2b13c2.dliver.pages.dev`)를 완료했으며, preview/운영 `admin/bootstrap` 응답에서 `securityLogs` 키 반영을 확인했다. 또한 인증 회귀 스크립트의 비밀번호 길이 정책 불일치(`1234`)를 수정해 운영 통과를 확인했고, D1 하드 백업 및 스케줄 백업 실행까지 정상 완료했다.
- 변경 파일:
- 딜리버(DELIVER)/07_자동화스크립트-AutomationScripts/auth_debug_check.sh
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 딜리버(DELIVER)/06_운영로그-OpsLogs/backup-schedule/backup-20260224-095303.log
- 딜리버(DELIVER)/08_데이터베이스-Database/04_백업-Backups/db-snapshot-20260224-095201.tar.gz
- 다음 작업: 관리자 UI에서 보안 감사로그 필터(기간/이벤트 타입) 고도화 및 CSV 내보내기 추가

## 2026-02-24 10:25:49 KST
- 단계: 랜딩페이지 채널톡 위젯 삽입 + CSP 반영 + 운영 배포
- 요약: 랜딩페이지에 채널톡 부트 로더를 추가해 `CHANNEL_TALK_PLUGIN_KEY` 또는 `window.DLIVER_CHANNEL_TALK_PLUGIN_KEY`로 위젯을 활성화할 수 있도록 구성했다. 정적 보안 헤더 `_headers`의 CSP에 `cdn.channel.io`, `*.channel.io`, `api.channel.io`, websocket/frame 허용 규칙을 추가해 브라우저 차단 없이 동작 가능하게 반영했다. Cloudflare Pages 재배포(`https://b608cc38.dliver.pages.dev`) 완료 후 운영 경로에서 코드/헤더 반영을 확인했고, `auth_debug_check.sh` 회귀 테스트도 통과했다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/_headers
- 딜리버(DELIVER)/README.md
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 채널톡 실운영 `pluginKey` 입력 후 랜딩 실사용 노출 확인 및 문의 시나리오(영업시간/오프라인 응답) 세팅

## 2026-02-24 10:42:25 KST
- 단계: 채널톡 pluginKey 주입 + 운영 반영 완료
- 요약: 전달받은 채널톡 pluginKey(`effcd765-65b5-49ca-b003-b18931fc6f38`)를 랜딩 설정 상수(`CHANNEL_TALK_PLUGIN_KEY`)에 주입하고 Pages 재배포(`https://0c208228.dliver.pages.dev`)를 완료했다. 운영 랜딩 HTML에서 pluginKey/채널톡 CDN 로더 반영을 확인했으며, 보안 스모크 테스트도 통과해 회귀 없이 적용 완료했다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 채널톡 관리자 콘솔에서 웰컴 메시지/운영시간 자동응답 시나리오 세팅

## 2026-02-24 10:59:02 KST
- 단계: 토스페이먼츠 기반 포인트 충전 기능 추가(회원포털 UI + 결제 API + D1 스키마)
- 요약: 회원전용 페이지 상단/매체목록 하단에 포인트충전 버튼을 배치하고 모달 UI를 연결했다. 결제 준비/승인 API(`/api/payments/toss/prepare`, `/api/payments/toss/confirm`)를 추가해 토스 SDK 리다이렉트 승인 흐름을 완성했으며, `point_charge_payments` 테이블과 승인 시 포인트 자동 적립 트리거를 D1 스키마에 반영했다. 또한 Toss SDK 로딩을 위해 CSP/Permissions-Policy를 보강하고 캐시 갱신 버전을 상향했다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/app.js
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/functions/api/payments/toss/_common.js
- 딜리버(DELIVER)/functions/api/payments/toss/prepare.js
- 딜리버(DELIVER)/functions/api/payments/toss/confirm.js
- 딜리버(DELIVER)/functions/_middleware.js
- 딜리버(DELIVER)/_headers
- 딜리버(DELIVER)/08_데이터베이스-Database/01_마이그레이션-Migrations/003_init_d1_schema.sql
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/.env.cloudflare.example
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 실환경 시크릿(`TOSS_CLIENT_KEY`, `TOSS_SECRET_KEY`) 주입 후 Pages 배포 및 실결제 승인 콜백 검증

## 2026-02-24 11:02:57 KST
- 단계: 포인트 환불 규정 접기/펼치기 UI 반영 + D1 원격 반영 실행
- 요약: 회원 요청 문구를 그대로 반영해 충전 모달에서 `포인트 환불 규정` 텍스트 클릭 시 규정 본문이 펼쳐지도록 `details/summary` UI를 추가했다. 모달 내 가독성 스타일을 보강했고, 캐시 버전을 `20260224r3`으로 상향해 즉시 반영되도록 조정했다. 또한 최신 D1 스키마(`003_init_d1_schema.sql`)를 원격 실행해 `point_charge_payments` 테이블/트리거가 운영 DB에 적용되었음을 확인했다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: Pages 재배포 완료 후 회원 포털 충전 모달에서 환불 규정 토글/토스 결제창 호출 실동작 점검

## 2026-02-24 11:09:03 KST
- 단계: 포인트 충전/환불규정 반영본 Cloudflare Pages 운영 배포
- 요약: 캐시된 wrangler(`4.68.0`)를 사용해 `dliver` 프로젝트에 최신 코드를 재배포했고, 배포 URL `https://4d315ecd.dliver.pages.dev` 발급을 확인했다. 이어서 preview/운영 도메인 HTTP 응답에서 200 상태와 업데이트된 CSP(`js.tosspayments.com`, `payment=(self)`) 헤더 반영을 확인했다.
- 변경 파일:
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 회원포털 실브라우저에서 포인트충전 모달의 환불규정 토글 및 토스 결제창 호출 최종 점검

## 2026-02-24 11:15:32 KST
- 단계: 랜딩 상담문의 버튼/연락처 항목 제거 + 채널톡 안내문구로 통일
- 요약: 랜딩 상단 우측 `상담 문의` 버튼을 삭제하고, 하단 문의 섹션에서 `전화번호/메일문의바람/카카오채널문의` 항목을 모두 제거했다. 문의 영역 문구는 `우측 하단 채널톡을 통해 상담주시면 빠르게 안내해드립니다.`로 변경했으며, 최신 코드 재배포를 완료해 배포 URL `https://666fc74b.dliver.pages.dev`를 발급받았다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 운영 랜딩에서 채널톡 문의 유입 동선(헤더/하단) 클릭 흐름 최종 점검

## 2026-02-24 11:18:58 KST
- 단계: 전 페이지 하단 사업자/운영정보 고정 반영
- 요약: 요청한 사업자 정보(`사업자명: 뎁스코퍼레이션 / 대표: 강경현 / 사업자등록번호: 877-53-00804`)와 운영정보를 랜딩/회원/관리자/루트 안내 페이지 최하단에 공통 반영했다. 회원/관리자 페이지에는 신규 푸터 컴포넌트를 추가하고 스타일을 보강했으며, 회원 포털 및 관리자 CSS 버전도 갱신해 캐시 반영 누락을 방지했다.
- 변경 파일:
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/styles.css
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: Pages 재배포 후 랜딩/회원/관리자 하단 사업자 정보 노출 상태 최종 점검

## 2026-02-24 11:19:59 KST
- 단계: 사업자/운영정보 하단 고정 반영본 운영 배포
- 요약: 반영본을 Cloudflare Pages에 재배포했고 배포 URL `https://db65c583.dliver.pages.dev`를 발급받았다. 배포 직후 응답 헤더(HTTP 200, CSP/Permissions-Policy)를 확인했으며, DNS 응답이 간헐적인 환경이라 상세 HTML 본문 재조회는 네트워크 상태 회복 시 추가 확인 예정이다.
- 변경 파일:
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 운영 도메인 본문 기준으로 랜딩/회원/관리자/루트의 하단 사업자 정보 노출 최종 확인

## 2026-02-24 11:28:09 KST
- 단계: 파비콘 심플 버전 교체(기존 ico/png 삭제)
- 요약: 기존 파비콘 파일(`favicon.ico`, `favicon-16x16.png`, `favicon-32x32.png`, `apple-touch-icon.png`)을 제거하고 단순한 `favicon.svg`를 신규 추가했다. 랜딩/회원/관리자 페이지의 아이콘 링크를 SVG 단일 참조로 교체했으며, Cloudflare Pages 재배포를 완료해 배포 URL `https://e2de4ede.dliver.pages.dev`를 발급받았다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/favicon.svg
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/favicon.ico (삭제)
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/favicon-16x16.png (삭제)
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/favicon-32x32.png (삭제)
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/apple-touch-icon.png (삭제)
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 운영 브라우저 캐시 비우기 후 탭 아이콘이 새 SVG 파비콘으로 표시되는지 최종 확인

## 2026-02-24 11:38:30 KST
- 단계: 신규 전달 로고([Image #1])로 브랜드 로고 전면 교체 + 운영 배포
- 요약: 사용자 전달 신규 파일과 동일한 이미지(`Downloads/Adobe Express - file.png`)를 브랜드 에셋 기준 파일로 적용했다. 상단 좌측 로고에서 참조하는 `dliver-logo-nav.png`를 포함해 `dliver-logo-header.png`, `dliver-logo1.png`를 동일 원본으로 치환했고, Cloudflare Pages 재배포를 완료해 배포 URL `https://af5ca66e.dliver.pages.dev`를 발급받았다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/dliver-logo-nav.png
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/dliver-logo-header.png
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/dliver-logo1.png
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 운영/프리뷰에서 상단 좌측 로고의 크기/가시성(모바일 포함) 최종 확인 후 필요 시 로고 여백 크롭본으로 2차 미세조정

## 2026-02-24 11:51:40 KST
- 단계: 메인 URL 단축/정규화(긴 랜딩 경로 제거) + 운영 배포
- 요약: 루트(`/`)에서 랜딩 콘텐츠를 직접 제공하도록 `index.html`을 랜딩 본문 기준으로 교체하고, 루트 기준 에셋/회원포털 경로를 보정했다. 또한 Functions 미들웨어에서 `www.dliver.co.kr -> dliver.co.kr` 및 기존 랜딩 경로(`/01_서비스코드-ServiceCode/랜딩페이지-LandingPage...`)를 `/`로 301 리다이렉트하도록 강제해 주소창이 짧고 일관되게 유지되도록 정규화했다. 사이트맵도 대표 URL(`/`) 단일 항목으로 정리했으며 운영 배포 URL `https://ae899f9d.dliver.pages.dev`에서 반영을 확인했다.
- 변경 파일:
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/functions/_middleware.js
- 딜리버(DELIVER)/_redirects
- 딜리버(DELIVER)/sitemap.xml
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: Google Search Console/Naver Search Advisor에 갱신된 canonical/301 구조 기준으로 재수집 요청 및 사이트 소유권 검증 완료

## 2026-02-24 12:05:55 KST
- 단계: 네이버 소유권 메타태그 반영 + 운영 배포
- 요약: 전달받은 네이버 웹마스터 소유권 태그(`<meta name="naver-site-verification" content="db80323608f2018fab38668c4820913ec3ab3414" />`)를 메인 랜딩 `<head>`에 반영했다. 루트 랜딩(`index.html`)과 랜딩 원본 파일 모두에 삽입해 경로 이중화 상황에서도 검증 누락이 없도록 처리했고, Cloudflare Pages 재배포(`https://5849c0cb.dliver.pages.dev`) 후 운영 응답 HTML에서 메타태그 노출을 확인했다.
- 변경 파일:
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 네이버 Search Advisor에서 소유권 재확인 실행 후 사이트맵 재수집 요청

## 2026-02-24 12:27:41 KST
- 단계: 모바일 상단 로고 규격 최적화 + 로그인 아이디 입력란 기본 문구 정리
- 요약: 정사각형 로고 원본의 투명 여백으로 모바일 상단 로고가 작게 보이던 문제를 해결하기 위해 랜딩/회원/관리자의 `.brand`를 고정 비율 뷰포트로 조정하고, `.brand-logo`를 `object-fit: cover` + `object-position` 방식으로 크롭 표시하도록 개선했다. 모바일 미디어쿼리에서도 로고 박스 크기를 별도 튜닝해 가독성을 높였고, 랜딩 로그인 모달의 아이디 입력란 `placeholder="test"`를 `아이디 입력`으로 변경했다. Cloudflare Pages 배포(`https://1fcfe643.dliver.pages.dev`) 후 운영 응답 기준으로 CSS/placeholder 반영을 확인했다.
- 변경 파일:
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/styles.css
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 실제 모바일(ios/safari, android/chrome)에서 상단 네비 높이/로고 선명도/버튼 줄바꿈 여부 최종 육안 점검

## 2026-02-24 12:36:12 KST
- 단계: 로고 잘림 이슈 근본 해결(크롭 전용 로고 파일 도입 + contain 렌더링 전환)
- 요약: 반복된 미세 위치 보정 대신 상단 로고용 원본을 투명 여백 기준으로 직접 크롭한 신규 파일(`dliver-logo-nav-tight.png`, 733x193)을 생성해 참조를 통일했다. 랜딩/회원/관리자/루트의 브랜드 로고 CSS를 `cover` 기반 잘림 방식에서 `height:auto` 기반 비크롭 렌더링으로 전환하여 PC/모바일 공통으로 상단 잘림이 발생하지 않도록 구조를 재정비했다. 배포 URL `https://07cdfcc2.dliver.pages.dev`에서 운영 반영(새 로고 파일 참조 + 스타일 값)을 확인했다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/dliver-logo-nav-tight.png
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/styles.css
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/styles.css
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 실제 단말(PC 크롬/사파리, 모바일 iOS/Android) 최종 육안 확인 후 필요 시 폭만 2~4px 단위로 조정

## 2026-02-24 12:42:24 KST
- 단계: 모바일 메신저 공유 썸네일(OG 이미지) 오류 수정
- 요약: 카카오톡 등 메신저 공유 시 썸네일이 깨지던 원인은 `og:image`가 정사각형 로고 파일(1024x1024)을 참조하던 구조였다. 공유 전용 가로형 이미지(`og-share-1200x630.png`)를 신규 생성(1200x630)하고, 루트/랜딩 페이지의 Open Graph 및 Twitter 메타 이미지를 해당 파일로 교체했다. 추가로 `og:image:width/height/type/secure_url/alt`를 명시해 크롤러 해석 안정성을 높였고, 운영 반영 후 실제 응답 HTML/이미지 헤더를 검증했다.
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/공통데이터-SharedData/brand/og-share-1200x630.png
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/03_프로젝트문서-ProjectDocs/개발기록-DevelopmentJournal.md
- 다음 작업: 카카오 공유 디버거에서 URL 스크랩 갱신(캐시 초기화) 후 실메신저 공유 카드 최종 확인

## 2026-02-25 13:22:33 KST
- 단계: review-engine-v2-policy-unification-and-hard-block-fix
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/functions/api/_lib/review_engine.js
- 딜리버(DELIVER)/functions/api/review/analyze.js
- 딜리버(DELIVER)/src/
- 다음 작업: 이어서 개발 진행

## 2026-02-26 12:30:59 KST
- 단계: 푸터 사업자정보(사업장소재지/이메일) 추가 및 도메인 배포 반영
- 요약: 단계 완료 체크포인트 저장
- 변경 파일:
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/관리자페이지-AdminPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-FirstLandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/랜딩페이지-LandingPage/index.html
- 딜리버(DELIVER)/01_서비스코드-ServiceCode/회원전용페이지-MemberPortal/index.html
- 딜리버(DELIVER)/index.html
- 딜리버(DELIVER)/06_운영로그-OpsLogs/backup-schedule/backup-20260226-121504.log
- 다음 작업: 이어서 개발 진행
